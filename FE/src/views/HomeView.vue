<template>
  <div class="container">
    <header class="header">
      <div class="header-content">
        <h1 class="title">üê® Hierarchy Table - FE Assessment</h1>
        <div class="stats">
          <span class="stat-item">Total items: {{ totalItems }}</span>
          <span class="stat-item">Expanded: {{ expandedCount }}</span>
        </div>
      </div>
    </header>

    <main>
      <div class="table-container">
        <div class="table-header">
          <div class="table-controls">
            <button @click="expandAll" class="control-btn">Expand All</button>
            <button @click="collapseAll" class="control-btn">Collapse All</button>
          </div>
        </div>
        <HierarchyTable
          :data="hierarchyData"
          @item-toggled="onItemToggled"
          @item-removed="onItemRemoved"
        />
      </div>
    </main>
  </div>
</template>

<script setup>
import { computed, onMounted } from 'vue'
import { useHierarchyTableStore } from '@/stores/hierarchyTableStore'
import HierarchyTable from '@/components/HierarchyTable/HierarchyTable.vue'

// Store
const hierarchyStore = useHierarchyTableStore()

// Reactive data
const hierarchyData = computed(() => hierarchyStore.hierarchyData)
const totalItems = computed(() => hierarchyStore.totalItemsCount)
const expandedCount = computed(() => hierarchyStore.expandedItemsCount)

const expandAll = () => {
  hierarchyStore.expandAll()
}

const collapseAll = () => {
  hierarchyStore.collapseAll()
}

const onItemToggled = (itemId) => {
  console.log('Item toggled:', itemId)
}

const onItemRemoved = (itemId) => {
  hierarchyStore.removeItem(itemId)
  console.log('Item removed:', itemId)
}

const printKoala = () => {
  console.log(
    `%c
                    Ahoj üëã

‚†Ä‚†Ä‚†Ä‚£†‚†ñ‚†ö‚†â‚†ô‚†≤‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†æ‚†ã‚†â‚†ë‚†¢‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚¢Ä‚°û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ì‚†¶‚†§‚†§‚†¥‚†ñ‚†í‚†â‚†â‚†â‚†â‚†â‚†â‚†â‚†í‚†≤‚†¶‚†§‚†§‚†¥‚†ü‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢∑‚°Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚£æ‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£ß‚†Ä‚†Ä‚†Ä
‚¢∏‚°á‚¢Ä‚°¥‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¶‚†Ä‚¢π‚£Ü‚†Ä‚†Ä
‚†à‚¢ß‚°û‚£¥‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£§‚£∂‚£¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ä‚†Ä‚†Ä‚†Ä‚††‚£§‚¢ß‚°æ‚†ô‚†Ä‚†Ä
‚†Ä‚†à‚¢ø‚°á‚†Ä‚†Ä‚†Ä‚¢†‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚££‚£ø‚£ø‚£ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≥‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚°æ‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†ò‚£á‚†Ä‚†Ä‚¢Ä‚°æ‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚£ø‚†Ä‚†Ä‚¢∏‚£Ø‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚£ø‚£∑‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£∑‚†Ä‚†Ä‚†Ä‚£º‚†Å‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†à‚†≥‚†§‚£º‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†Å‚†Ä‚†Ä‚†∏‚£ø‚£ø‚£ø‚£ø‚£ø‚°á‚†Ä‚†Ä‚†à‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£ß‚†§‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†ª‚†ø‚†ø‚†ø‚†ü‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£π‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢ø‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚†≤‚†¥‚†ü‚†¶‚†¥‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†π‚£¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°¥‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ô‚¢¶‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£∂‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∏‚†ã‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°ñ‚†ö‚£ª‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ª‚£¶‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°è‚†Ä‚†Ä‚†Ä‚£æ‚†â‚†ô‚¢≤‚£º‚°§‚†û‚†â‚†Ä‚†Ä‚†Ä‚¢ê‚°Ü‚†Ä‚†Ä‚†Ä‚†à‚£Ø‚¢ß‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†á‚†Ä‚†Ä‚†Ä‚†à‚£©‚†â‚†â‚†ô‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∏‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚°à‚¢∑‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°è‚†Ä‚†Ä‚†Ä‚†∏‚°Ü‚†Ä‚†Ä‚£†‚°∂‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°á‚†Ä‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°á‚†Ä‚†Ä‚†Ä‚¢Ä‚°ø‚†∂‚†ã‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚†É‚†Ä‚†ò‚£ó‚†≤‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚°ñ‚†ã‚†ô‚†≤‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚£∞‚†§‚¢•‚£ø‚†§‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£§‚†û‚†Å‚†Ä‚†Ä‚†Ä‚¢π‚°Ü‚†õ‚¢∂‚°Ñ‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£∏‚†É‚†Ä‚†Ä‚†ô‚¢∑‚£ñ‚£É‚£†‚°§‚†¥‚†ñ‚†ã‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£∑‚†Ä‚°º‚†É‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚¢∏‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚£†‚†è‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†à‚£ß‚†Ä‚†Ä‚†Ä‚†Ä‚£∑‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚£á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£ß‚†Ä‚†Ä‚†Ä‚¢ø‚£Ä‚°Ä‚†Ä‚†Ä‚°ø‚¢ª‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚°¥‚†ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†≥‚†§‚†§‚†º‚¢∑‚£á‚£∏‚°æ‚†ì‚†ö‚†≥‚£Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£Ä‚£Ä‚£†‚°§‚†§‚†¥‚†ñ‚†õ‚†ã‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†â‚†â‚†â‚†â‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä

                   Koala42                        
  `,
    'color: #00e2ac; font-family: monospace;',
  )
}

onMounted(async () => {
  printKoala()
  try {
    await hierarchyStore.getData()
  } catch (error) {
    console.error('Failed to get the data:', error)
  }
})
</script>
